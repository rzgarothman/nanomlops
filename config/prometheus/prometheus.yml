global:
  scrape_interval: 15s

scrape_configs:
  # 1. 监控系统自身
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  # 2. 宿主机硬件资源 (需要导入 Grafana Dashboard ID: 1860)
  - job_name: 'node-exporter'
    static_configs:
      - targets: ['node-exporter:9100']

  # 3. Docker 容器资源 (需要导入 Grafana Dashboard ID: 14282 或 193)
  - job_name: 'cadvisor'
    static_configs:
      - targets: ['cadvisor:8080']

  # 4. 核心组件
  - job_name: 'postgres'
    static_configs:
      - targets: ['postgres-exporter:9187']

  - job_name: 'redis'
    static_configs:
      - targets: ['redis-exporter:9121']

  # 5. MLOps 应用指标
  - job_name: 'minio'
    metrics_path: /minio/v2/metrics/cluster
    static_configs:
      - targets: ['minio:9000']

  - job_name: 'gitea'
    static_configs:
      - targets: ['gitea:3000']

  - job_name: 'mlflow'
    static_configs:
      - targets: ['mlflow:5000']

  - job_name: 'docker_host'
    static_configs:
      - targets: ['host.docker.internal:9323']

  # 如果在 Workspace 中使用 BentoML 启动了服务并暴露了 metrics
  # - job_name: 'bentoml_service'
  #   static_configs:
  #     - targets: ['workspace:3000']
